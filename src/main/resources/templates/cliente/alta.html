<!DOCTYPE html>
<html>
<head>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script>
	$(document).ready(function() {
		$("#guardar").click(function() {
			
			var nombre = $("#nombre").val();
			var apellido = $("#apellido").val();
			var dni = $("#dni").val();
			var email = $("#email").val();
			var fechaNacimiento= $("#fechaNacimiento").val();
			json = {					
					"apellido": apellido, 
					"nombre": nombre, 					
					"dni": dni, 		
					"fechaNacimiento": fechaNacimiento,
					"email": email
			};
			console.log(json);
			$.ajax({
            	url: '/api/cliente/alta',
            	type: 'POST',
            	dataType: 'json',
            	data: JSON.stringify(json),
            	contentType: "application/json",
            	success: function(response){
                	console.log(response)
                	$("#formulario").hide(50,function(){$("#exito").show(1000)});
            	},
            	error: function(response){
                	console.log("HUBO UN ERROR:" + response);
                	if(response.responseJSON.message.includes("DNI")){
           			 $("#errorDNI").css("display", "block");
           			 $("#errorDNI").html(response.responseJSON.message);
                	}
            	}
        	})
		});
	});
</script>
</head>
<body>
	<div id="divFormulario">
	<div>
	<h1>Alta Cliente:</h1>
	</div>
	<div id="formulario">
			<p>Nombre: <input id="nombre" type="text" name="nombre"></p>
			<p>Apellido: <input id="apellido" type="text" name="apellido"></p>
			<p>DNI: <input id="dni" type="number" name="dni"></p>
			<p>Fecha de Nacimiento: <input id="fechaNacimiento" type="date" name="fechaNacimiento"></p>
			<p>Email: <input id="email" type="text" name="email"></p>
			<button id="guardar" type="button">Guardar</button>		
	</div>
	<div  id="exito" style="display: none;">
			<h1>Cliente Agregado</h1>
	</div>
	</div>
	<div>
		<a href="/cliente">ATRAS</a>
	</div>
</body>
</html>

